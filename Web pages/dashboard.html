<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard - Empowering the Nation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="shared-header.css">
    <style>
        .course-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .course-card:hover {
            transform: translateY(-2px);
        }
        .notes-area {
            min-height: 150px;
            resize: vertical;
        }
        .quiz-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .quiz-content {
            background: white;
            max-width: 600px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 0.5rem;
            max-height: 90vh;
            overflow-y: auto;
        }
        .quiz-option {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .quiz-option:hover {
            background-color: #f3f4f6;
        }
        .quiz-option.selected {
            background-color: #dbeafe;
        }
        .quiz-option.correct {
            background-color: #dcfce7;
        }
        .quiz-option.incorrect {
            background-color: #fee2e2;
        }
        #logout-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 100;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Include shared header -->
    <div id="header-container"></div>

    <div class="container mx-auto px-4 py-8">
        <button id="logout-btn" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg">
            Log Out
        </button>

        <h1 class="text-3xl font-bold text-gray-800 mb-8">Welcome back, Aiden!</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- First Aid Course -->
            <div class="course-card p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">First Aid</h2>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2">Course Notes</h3>
                    <textarea id="firstaid-notes" 
                        class="notes-area w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue focus:border-transparent"></textarea>
                </div>

                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700">Quizzes</h3>
                    <ul class="space-y-2">
                        <li>
                            <button onclick="startQuiz('firstaid')" 
                                class="w-full text-left p-3 bg-blue-50 text-primary-blue rounded-lg hover:bg-blue-100 transition-colors">
                                Quiz: Basic First Aid Assessment
                            </button>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Cooking Course -->
            <div class="course-card p-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">Cooking</h2>
                
                <div class="mb-6">
                    <h3 class="text-lg font-semibold text-gray-700 mb-2">Course Notes</h3>
                    <textarea id="cooking-notes"
                        class="notes-area w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue focus:border-transparent"></textarea>
                </div>

                <div class="space-y-4">
                    <h3 class="text-lg font-semibold text-gray-700">Quizzes</h3>
                    <ul class="space-y-2">
                        <li>
                            <button onclick="startQuiz('cooking')"
                                class="w-full text-left p-3 bg-blue-50 text-primary-blue rounded-lg hover:bg-blue-100 transition-colors">
                                Quiz: Kitchen Safety Basics
                            </button>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Quiz Modal -->
    <div id="quiz-modal" class="quiz-modal">
        <div class="quiz-content">
            <h2 id="quiz-title" class="text-2xl font-bold text-gray-800 mb-4"></h2>
            <div id="quiz-questions" class="space-y-4"></div>
            <div id="quiz-results" class="mt-6 hidden">
                <h3 class="text-xl font-semibold text-gray-800 mb-2">Quiz Results</h3>
                <p id="quiz-score" class="text-lg mb-4"></p>
                <button onclick="closeQuiz()" class="bg-primary-blue text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                    Close Quiz
                </button>
            </div>
        </div>
    </div>

    <script>
        // Pre-loaded notes and quiz data
        const courseData = {
            firstaid: {
                notes: "Key First Aid Principles:\n\n1. Check for Safety\n- Ensure the area is safe for you and the victim\n- Use personal protective equipment when available\n\n2. Primary Assessment (ABC)\n- Airway: Check if the airway is clear\n- Breathing: Look, listen, and feel for breathing\n- Circulation: Check pulse and look for severe bleeding\n\n3. Emergency Response Steps\n- Call emergency services (if necessary)\n- Stay calm and reassure the victim\n- Do not move the victim unless in immediate danger",
                quiz: {
                    title: "Basic First Aid Assessment",
                    questions: [
                        {
                            question: "What is the first step in any first aid situation?",
                            options: [
                                "Start CPR immediately",
                                "Check the scene for safety",
                                "Call emergency services",
                                "Check for breathing"
                            ],
                            correct: 1
                        },
                        {
                            question: "What does ABC stand for in first aid?",
                            options: [
                                "Always Be Careful",
                                "Airway, Breathing, Circulation",
                                "Apply Bandage Carefully",
                                "Alert, Bandage, Clean"
                            ],
                            correct: 1
                        }
                    ]
                }
            },
            cooking: {
                notes: "Kitchen Safety and Basic Techniques:\n\n1. Kitchen Safety\n- Always keep knives sharp (dull knives are more dangerous)\n- Turn pot handles inward to prevent accidents\n- Keep a fire extinguisher nearby\n- Use separate cutting boards for raw meat\n\n2. Basic Knife Skills\n- The claw grip: Curl fingers under when holding food\n- The pinch grip: Hold knife by blade between thumb and forefinger\n\n3. Temperature Guidelines\n- Chicken: 165°F (74°C)\n- Ground Beef: 160°F (71°C)\n- Fish: 145°F (63°C)",
                quiz: {
                    title: "Kitchen Safety Basics",
                    questions: [
                        {
                            question: "What is the correct way to position pot handles on the stove?",
                            options: [
                                "Pointing outward for easy access",
                                "Pointing inward to prevent accidents",
                                "Pointing to the side",
                                "Direction doesn't matter"
                            ],
                            correct: 1
                        },
                        {
                            question: "What is the safe minimum internal temperature for cooking chicken?",
                            options: [
                                "145°F (63°C)",
                                "155°F (68°C)",
                                "165°F (74°C)",
                                "175°F (79°C)"
                            ],
                            correct: 2
                        }
                    ]
                }
            }
        };

        // Load pre-loaded notes
        document.getElementById('firstaid-notes').value = courseData.firstaid.notes;
        document.getElementById('cooking-notes').value = courseData.cooking.notes;

        // Auto-save notes functionality
        document.querySelectorAll('textarea').forEach(textarea => {
            textarea.addEventListener('input', () => {
                const courseId = textarea.id.split('-')[0];
                localStorage.setItem(`notes_${courseId}`, textarea.value);
            });
        });

        // Quiz functionality
        function startQuiz(course) {
            const quizData = courseData[course].quiz;
            const modal = document.getElementById('quiz-modal');
            const title = document.getElementById('quiz-title');
            const questions = document.getElementById('quiz-questions');
            const results = document.getElementById('quiz-results');
            
            title.textContent = quizData.title;
            questions.innerHTML = '';
            results.classList.add('hidden');
            
            quizData.questions.forEach((q, qIndex) => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'mb-6';
                questionDiv.innerHTML = `
                    <p class="font-semibold mb-3">${qIndex + 1}. ${q.question}</p>
                    <div class="space-y-2">
                        ${q.options.map((opt, i) => `
                            <div class="quiz-option p-3 border rounded-lg" 
                                 data-question="${qIndex}" 
                                 data-option="${i}">
                                ${opt}
                            </div>
                        `).join('')}
                    </div>
                `;
                questions.appendChild(questionDiv);
            });

            modal.style.display = 'block';

            // Add click handlers for options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    const qIndex = this.dataset.question;
                    const selectedOption = parseInt(this.dataset.option);
                    const correctOption = quizData.questions[qIndex].correct;

                    // Remove previous selections for this question
                    document.querySelectorAll(`[data-question="${qIndex}"]`).forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                    });

                    // Mark selected option
                    this.classList.add('selected');
                    
                    // Check if all questions are answered
                    const allAnswered = [...document.querySelectorAll('.quiz-option.selected')].length === quizData.questions.length;
                    
                    if (allAnswered) {
                        // Show results
                        document.querySelectorAll('.quiz-option.selected').forEach(selected => {
                            const qIdx = selected.dataset.question;
                            const selectedOpt = parseInt(selected.dataset.option);
                            const correctOpt = quizData.questions[qIdx].correct;
                            
                            if (selectedOpt === correctOpt) {
                                selected.classList.add('correct');
                            } else {
                                selected.classList.add('incorrect');
                                document.querySelector(`[data-question="${qIdx}"][data-option="${correctOpt}"]`).classList.add('correct');
                            }
                        });

                        // Calculate score
                        const correct = document.querySelectorAll('.quiz-option.correct.selected').length;
                        const total = quizData.questions.length;
                        const percentage = (correct / total) * 100;
                        
                        document.getElementById('quiz-score').textContent = 
                            `You scored ${correct}/${total} (${percentage}%)`;
                        results.classList.remove('hidden');
                    }
                });
            });
        }

        function closeQuiz() {
            document.getElementById('quiz-modal').style.display = 'none';
        }

        // Logout functionality
        document.getElementById('logout-btn').addEventListener('click', () => {
            window.location.href = 'login.html';
        });

        // Load shared header
        fetch('shared-header.html')
            .then(response => response.text())
            .then(html => {
                document.getElementById('header-container').innerHTML = html;
            });
        
        // Load shared footer
        (function(){
            const footerContainer = document.createElement('div');
            footerContainer.id = 'footer-container';
            document.body.appendChild(footerContainer);
            fetch('shared-footer.html')
                .then(response => response.text())
                .then(html => { document.getElementById('footer-container').innerHTML = html; })
                .catch(() => {
                    document.getElementById('footer-container').innerHTML = `
<style>:root{ --primary-blue: #2563eb; } .site-footer{ background: rgba(255,255,255,0.95); border-top: 1px solid rgba(0,0,0,0.06); padding: 1rem 0; margin-top: 2rem; } .site-footer .social-icons a{ display: inline-flex; align-items: center; justify-content: center; width: 40px; height: 40px; border-radius: 8px; color: rgba(0,0,0,0.85); transition: background-color 0.15s ease, transform 0.12s ease; text-decoration: none; } .site-footer .social-icons a:hover{ background: rgba(37,99,235,0.08); transform: translateY(-2px); color: var(--primary-blue); } .site-footer .social-icons svg{ width:20px; height:20px; display:block; fill:currentColor; stroke:none; } @media (max-width: 640px){ .site-footer .footer-inner{ flex-direction: column; gap: 0.75rem; align-items: center; } }</style>
<footer class="site-footer"><div class="max-w-6xl mx-auto px-4 footer-inner flex items-center justify-between"><div class="text-sm text-gray-700">© 2025 Empowering the Nation</div><div class="flex items-center space-x-4 social-icons" aria-label="Social links"><a href="https://www.facebook.com/share/14Qm4aEndwB/" target="_blank" rel="noopener noreferrer" aria-label="Facebook" title="Facebook"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M22 12.07C22 6.48 17.52 2 11.93 2S2 6.48 2 12.07c0 5.01 3.66 9.16 8.44 9.93v-7.03H8.09v-2.9h2.35V9.41c0-2.33 1.38-3.61 3.5-3.61.99 0 2.03.18 2.03.18v2.23h-1.14c-1.12 0-1.47.7-1.47 1.42v1.71h2.5l-.4 2.9h-2.1V22C18.34 21.23 22 17.08 22 12.07z"/></svg></a><a href="https://x.com/empowering83378?t=h8k_neAcqymiogZmZnyK8Q&s=08" target="_blank" rel="noopener noreferrer" aria-label="X" title="X"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M21.36 5.27c.15-.95-.21-1.63-1.06-1.63-.49 0-1.02.17-1.66.51-1.35.66-2.64 1.03-3.87 1.12-1.19.09-2.17.05-2.95-.14-.82-.2-1.15-.6-1.15-1.22 0-.31.09-.66.27-1.06L9.4 2.03C9.14 2.01 8.82 2 8.47 2 6.92 2 5.88 3.03 5.88 4.62c0 1.06.49 1.84 1.46 2.36-.42 0-.95-.07-1.58-.21-.56-.12-1.15-.18-1.74-.18v.01c0 1.9 1.36 3.59 3.21 4.06-.41.11-.84.17-1.27.17-.31 0-.61-.03-.9-.09.62 2.01 2.44 3.47 4.59 3.51-1.68 1.32-3.8 2.11-6.07 2.11-.39 0-.77-.02-1.14-.07 2.23 1.46 4.88 2.31 7.73 2.31 9.24 0 14.3-7.67 14.3-14.32 0-.22 0-.44-.02-.65.98-.72 1.82-1.62 2.49-2.65z"/></svg></a><a href="https://www.instagram.com/3mpo.weringthenation?utm_source=qr&igsh=MW03MjBrN3o1Z2NuNQ==" target="_blank" rel="noopener noreferrer" aria-label="Instagram" title="Instagram"><svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5zm5 6.5a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM18.5 6a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/></svg></a></div></div></footer>`;
                });
        })();
    </script>
</body>
</html>